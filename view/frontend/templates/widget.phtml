<?php

/**
 * @var \STBDigital\Botario\Block\Widget $block
 */

if (!$block->isEnabled()) {
    return;
}

if (method_exists($block, 'isDeniedByHandle') && $block->isDeniedByHandle()) {
    return;
}

$botId = trim((string)$block->getBotId());
$apiUrl = trim((string)$block->getApiUrl());
$jsUrl = trim((string)$block->getJsModuleUrl());

if ($botId === '' || $apiUrl === '' || $jsUrl === '') {
    return;
}
?>


<botario-chat <?= $block->isCollapsed() ? '' : 'open="true"'?>
              bot-id="<?= $block->escapeHtmlAttr($botId) ?>"
              api-url="<?= $block->escapeHtmlAttr($apiUrl) ?>"></botario-chat>

<script type="module" src="<?= $block->escapeUrl($jsUrl) ?>"></script>
